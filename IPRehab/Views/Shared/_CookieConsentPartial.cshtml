@*https://docs.microsoft.com/en-us/aspnet/core/security/gdpr?view=aspnetcore-5.0*@
@*https://wakeupandcode.com/cookies-and-consent-in-asp-net-core/*@
@using Microsoft.AspNetCore.Http.Features

@{
  var consentFeature = Context.Features.Get<ITrackingConsentFeature>();
  var showBanner = !consentFeature?.CanTrack ?? false;
  var cookieString = consentFeature?.CreateConsentCookie();
}

@if (showBanner)
{
  <div class="flex-container-evenly-justified alert alert-info alert-dismissible fade show cookieConsent fixedBottom">
    <div id="consentText" role="alert">
      This app uses cookies to improve user experience, and analyze website traffic. By clicking “Accept” you consent to store on your device all the technologies described in in the Cookie Policy.” <a asp-page="/Privacy">Learn More</a>.
    </div>
    <button id="btnConcent" class="badge badge-warning" data-dismiss="alert" aria-label="Close" data-cookie-string="@cookieString">
      <span aria-hidden="true">Accept</span>
    </button>
  </div>
  <script>
    (function () {
      var btnConsent = $("#btnConsent");
      btnConsent.click(function (event) {
        document.cookie = btnConsent.data("data-cookie-string");
      });
    })();
  </script>
}
