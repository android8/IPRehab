import{Utility}from"./commonImport.js";const branchingController=function(){const e=new Utility;function i(){const i=$(".persistable[id^=Q12]"),s=$(".persistable[id^=Q23]"),n=$('.persistable:not("[id^=Q12]"):not([id^=Q23])');e.isEmpty(i)||e.isEmpty(s)?n.each(function(){$(this).prop("disabled",!0)}):$(".persistable").each(function(){$(this).prop("disabled",!1)})}function s(){let e=!1,i=!1,s=!1,n=!1;$(".persistable[id^=Q14A]").each(function(){$(this).prop("checked")&&((e=-1!==$(this).prop("id").indexOf("Yes"))&&(s=!0),(i=-1!==$(this).prop("id").indexOf("No"))&&(n=!0))});const o=$(".persistable[id^=Q14B]");!s&&!n&&o.length>0?o.each(function(){$(this).prop("checked",!1).prop("disabled",!0)}):(e&&o.length>0&&(o.removeAttr("disabled"),o[0].focus()),i&&o.length>0&&o.each(function(){$(this).prop("checked",!1).prop("disabled",!0)}))}function n(){const i=$(".persistable[id^=Q16A]"),s=$(".persistable[id^=Q17]:not([id^=Q17B])");i.length>0&&!e.isEmpty(i)&&1===e.getControlValue(i)?s.length>0&&s.prop("disabled",!1).focus():s.length>0&&s.val(-1).prop("disabled",!0)}function o(){const e=!0===$(".persistable[id^=Q42][id*=Yes]").prop("checked"),i=!0===$(".persistable[id^=Q42][id*=No]").prop("checked"),s=$(".persistable[id^=Q43]");switch(!0){case i:s.val(""),s.prop("disabled",!0);break;case e:s.length>0&&s.prop("disabled",!1),s.first().focus();break;default:s.prop("disabled",!0)}}function r(e){const i=$(".persistable[id^=Q44D]"),s=$(".persistable[id^=Q45]"),n=$(".persistable[id^=Q46]"),o=!0===e.prop("checked")&&-1!==e.prop("id").indexOf("Yes"),r=!0===e.prop("checked")&&-1!==e.prop("id").indexOf("No");o&&(i.prop("disabled",!1).focus(),s.prop("disabled",!1)),r&&(i.val(-1),i.prop("disabled",!0),n.prop("disabled",!1).focus())}function t(i){const s=e.getControlValue(i);let n,o,r;switch(-1!==i.prop("id").indexOf("Admission_Performance")?(o=$(".persistable[id^=GG0170J_Admission_Performance], .persistable[id^=GG0170K_Admission_Performance], .persistable[id^=GG0170L_Admission_Performance]"),r=$(".persistable[id^=GG0170M_Admission_Performance]"),n=$(".persistable[id^=GG0170J_Admission_Performance]")):(o=$(".persistable[id^=GG0170J_Discharge_Performance], .persistable[id^=GG0170K_Discharge_Performance], .persistable[id^=GG0170L_Discharge_Performance]"),r=$(".persistable[id^=GG0170M_Discharge_Performance]"),n=$(".persistable[id^=GG0170J_Discharge_Performance]")),!0){case s>=7:o.length>0&&o.each(function(){$(this).prop("disabled",!0).val(-1).change()}),r.length>0&&r[0].focus();break;case s>0&&s<=6:o.length>0&&(o.each(function(){$(this).prop("disabled",!1).val(-1).change()}),n[0].focus());break;default:o.each(function(){$(this).prop("disabled",!0).val(-1).change()})}}function a(i){const s=e.getControlValue(i);let n,o,r;switch(-1!==i.prop("id").indexOf("GG0170M")?-1!==i.prop("id").indexOf("Admission_Performance")?(n=$(".persistable[id^=GG0170N_Admission_Performance]"),r=$(".persistable[id^=GG0170P_Admission_Performance]")):(n=$(".persistable[id^=GG0170N_Discharge_Performance]"),r=$(".persistable[id^=GG0170P_Discharge_Performance]")):-1!==i.prop("id").indexOf("Admission_Performance")?(n=$(".persistable[id^=GG0170N_Admission_Performance]"),o=$(".persistable[id^=GG0170O_Admission_Performance]"),r=$(".persistable[id^=GG0170P_Admission_Performance]")):(n=$(".persistable[id^=GG0170N_Discharge_Performance]"),o=$(".persistable[id^=GG0170O_Discharge_Performance]"),r=$(".persistable[id^=GG0170P_Discharge_Performance]")),!0){case s>=7:r.length>0&&r[0].focus();break;case s>0&&s<=6:n.length>0&&n[0].focus()}}function c(e){let i,s;const n=-1!==e.prop("id").indexOf("Admission_Performance")&&-1!==e.prop("id").indexOf("314")&&e.prop("checked"),o=-1!==e.prop("id").indexOf("Admission_Performance")&&-1!==e.prop("id").indexOf("315")&&e.prop("checked"),r=-1!==e.prop("id").indexOf("Discharge_Performance")&&-1!==e.prop("id").indexOf("314")&&e.prop("checked"),t=-1!==e.prop("id").indexOf("Discharge_Performance")&&-1!==e.prop("id").indexOf("315")&&e.prop("checked");n&&((s=$(".persistable[id^=GG0170R][id*=Admission]")).each(function(){$(this).prop("disabled",!1)}),s[0].focus()),r&&((s=$(".persistable[id^=GG0170R][id*=Discharge]")).each(function(){$(this).prop("disabled",!1)}),s[0].focus()),(o||t)&&((i=$(".persistable[id^=H0350]")).each(function(){$(this).prop("disabled",!1)}),i[0].focus())}function d(i){let s;s=-1!==i.prop("id").indexOf("Admission_Performance")?$(".persistable[id^=J1750][id*=Admission_Performance]"):$(".persistable[id^=J1750][id*=Discharge_Performance]"),0===e.getControlValue(i)?(s.each(function(){$(this).prop("disabled",!1)}),s[0].focus()):s.each(function(){$(this).prop("checked",!1)})}return{CommonUnlock:function(){i(),s(),n(),$(".persistable[id^=Q42]").each(function(){o()}),$(".persistable[id^=Q44C]").each(function(){r($(this))}),$(".persistable[id^=GG0170I]:not([id*=Discharge_Goal])").each(function(){t($(this))}),$(".persistable[id^=GG0170M]:not([id*=Discharge_Goal])").each(function(){a($(this))}),$(".persistable[id^=GG0170N]:not([id*=Discharge_Goal])").each(function(){a($(this))}),c($(".persistable[id^=GG0170Q]:not([id*=Discharge_Goal])")),d($(".persistable[id^=J0510]:not([id*=Discharge_Goal])")),$(".persistable[id^=Q12]")[0].focus()},Q12_Q23_blank_then_Lock_All:i,Q14B_enabled_if_Q14A_is_Yes:s,Q16A_is_Home_then_Q17:n,Q21A_Q21B_Q22_Q24_is_Arthritis_then_Q24A:function(){$(".persistable[id ^= Q21A_], .persistable[id ^= Q21B_], .persistable[id ^= Q22_], .persistable[id ^= Q24_]").each(function(){e.isEmpty($(this))||"123.45"!==$(this).val()||$(".persistable[id^=Q44C][id*=86]").prop("checked",!0)})},Q42_Interrupted_then_Q43:o,Q44C_Affect_Q44D_Q46:r,GG0170JKLMN_depends_on_GG0170I:t,GG0170P_depends_on_GG0170M_and_GG0170N:a,H0350_depends_on_GG0170Q:c,J1750_depends_on_J0510:d,AddMore:function(e,i){const s=$(".persistable[id^="+i+"_"+e+"]").length,n=$(".persistable[id^="+i+"_"+e+"_"+s+"]"),o=n.clone();o.val("").focus(),n.append(o)}}}();$(function(){const e=$(".pageTitle").data("systitle").replace(/\s/g,"_");"Full"===e?$(".persistable").prop("disabled",!0):branchingController.CommonUnlock(),$("button[id^=btnMore]").each(function(){$(this).click(function(){const i=$(this).data("questionkey");branchingController.AddMore(e,i)})}),$(".persistable[id^=Q12], .persistable[id^=Q23]").each(function(){$(this).change(function(){branchingController.CommonUnlock()})}),$(".persistable[id^=Q14A]").each(function(){$(this).change(function(){branchingController.Q14B_enabled_if_Q14A_is_Yes()})}),$(".persistable[id^=Q16A]").each(function(){$(this).change(function(){branchingController.Q16A_is_Home_then_Q17()})}),$(".persistable[id^=Q42]").each(function(){$(this).change(function(){branchingController.Q42_Interrupted_then_Q43()})}),$(".persistable[id^=Q44C]").each(function(){$(this).change(function(){branchingController.Q44C_Affect_Q44D_Q46($(this))})}),$(".persistable[id^=GG0170I]:not([id*=Discharge_Goal])").each(function(){$(this).change(function(){branchingController.GG0170JKLMN_depends_on_GG0170I($(this))})}),$(".persistable[id^=GG0170M]:not([id*=Discharge_Goal]), .persistable[id^=GG0170N]:not([id*=Discharge_Goal])").each(function(){$(this).change(function(){branchingController.GG0170P_depends_on_GG0170M_and_GG0170N($(this))})}),$(".persistable[id^=GG0170Q]:not([id*=Discharge_Goal])").each(function(){$(this).change(function(){branchingController.H0350_depends_on_GG0170Q($(this))})}),$(".persistable[id^=J0510]:not([id*=Discharge_Goal])").each(function(){$(this).change(function(){branchingController.J1750_depends_on_J0510($(this))})})});